<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸€ë¡œë²Œ EV ëª¨í„° ì‹œì¥ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</title>
    <link rel="stylesheet" href="/src/frontend/css/styles.css">
    <script src="/node_modules/chart.js/dist/chart.umd.js"></script>
    <script src="/node_modules/moment/moment.min.js"></script>
    <script src="/src/frontend/js/chartEvents.js"></script>
    <script src="/src/frontend/js/chartManager.js"></script>
    <script src="/src/frontend/js/visualizations.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Noto+Sans+KR:wght@300;400;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', 'Noto Sans KR', sans-serif;
            background-color: #1a1a1a;
            color: #f0f0f0;
            line-height: 1.6;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .header h1 {
            font-size: 3.5em;
            font-weight: 700;
            margin-bottom: 16px;
            color: #ffffff;
            letter-spacing: -0.02em;
        }

        .header p {
            font-size: 1.2em;
            color: #a8a8a8;
            font-weight: 400;
        }

        .auto-update-status {
            background-color: #2b2b2b;
            color: #f0f0f0;
            padding: 16px 24px;
            border-radius: 16px;
            margin: 20px auto;
            text-align: center;
            max-width: 600px;
            font-size: 0.95em;
            border: 1px solid #444;
        }

        .update-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 12px;
            background: #30d158;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.4; }
        }

        .countdown-timer {
            font-weight: 600;
            color: #ff9f0a;
        }

        .last-update-info {
            text-align: center;
            color: #a8a8a8;
            margin: 16px auto;
            font-size: 0.9em;
        }

        .filter-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .filter-tab {
            background-color: #2b2b2b;
            color: #f0f0f0;
            border: 1px solid #444;
            padding: 12px 24px;
            border-radius: 24px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 0.95em;
        }

        .filter-tab:hover {
            background-color: #3d3d3d;
            transform: translateY(-1px);
        }

        .filter-tab.active {
            background-color: #007aff;
            border-color: #007aff;
            color: white;
            transform: translateY(-1px);
        }
        
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 32px;
            margin-bottom: 40px;
        }

        .news-item {
            background-color: #2b2b2b;
            border-radius: 20px;
            padding: 32px;
            border: 1px solid #444;
            transition: all 0.4s;
            position: relative;
            cursor: pointer;
        }

        .news-item:hover {
            background-color: #3d3d3d;
            border-color: #666;
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .news-item a {
            text-decoration: none;
            color: inherit;
        }

        .news-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 20px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        .news-badge.breaking {
            background-color: rgba(255, 59, 48, 0.15);
            color: #ff453a;
            border: 1px solid rgba(255, 59, 48, 0.3);
            animation: pulse 2s infinite;
        }

        .news-badge.tech {
            background-color: rgba(175, 82, 222, 0.15);
            color: #bf5af2;
            border: 1px solid rgba(175, 82, 222, 0.3);
        }

        .news-badge.market {
            background-color: rgba(48, 209, 88, 0.15);
            color: #30d158;
            border: 1px solid rgba(48, 209, 88, 0.3);
        }

        .news-badge.korea {
            background-color: rgba(255, 159, 10, 0.15);
            color: #ff9f0a;
            border: 1px solid rgba(255, 159, 10, 0.3);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .news-title {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 16px;
            color: #f2f2f7;
            line-height: 1.3;
            letter-spacing: -0.01em;
        }

        .news-summary {
            color: #a8a8a8;
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 1em;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #8e8e93;
            border-top: 1px solid #444;
            padding-top: 20px;
        }

        .news-source {
            font-weight: 600;
            color: #007aff;
        }

        .news-date {
            font-style: italic;
        }

        .more-btn, .back-btn {
            display: block;
            margin: 50px auto;
            padding: 16px 32px;
            background-color: #2b2b2b;
            color: #f2f2f7;
            border: 1px solid #444;
            border-radius: 24px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .more-btn:hover, .back-btn:hover {
            background-color: #3d3d3d;
            border-color: #666;
            transform: translateY(-2px);
        }

        .back-btn {
            margin-bottom: 32px;
        }

        .hidden {
            display: none;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 32px;
            margin-bottom: 40px;
        }
        
        .card {
            background-color: #2b2b2b;
            border-radius: 20px;
            padding: 32px;
            border: 1px solid #444;
            transition: all 0.3s ease;
        }

        .card:hover {
            background-color: #3d3d3d;
            border-color: #666;
            transform: translateY(-2px);
        }

        .card h3 {
            font-size: 1.4em;
            margin-bottom: 20px;
            color: #f2f2f7;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 12px;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 16px 0;
            padding: 16px;
            background-color: #3d3d3d;
            border-radius: 12px;
        }

        .metric-label {
            font-weight: 500;
            color: #a8a8a8;
        }

        .metric-value {
            font-weight: 600;
            color: #007aff;
            font-size: 1.1em;
        }

        .trend-up {
            color: #30d158;
        }

        .trend-down {
            color: #ff453a;
        }

        .chart-container {
            height: 300px;
            margin: 20px 0;
        }

        .source {
            font-size: 0.8em;
            color: #8e8e93;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #444;
        }

        .source a {
            color: #007aff;
            text-decoration: none;
        }

        .source a:hover {
            text-decoration: underline;
        }

        .large-card {
            grid-column: 1 / -1;
        }

        .tech-item {
            background-color: #3d3d3d;
            padding: 20px;
            margin: 16px 0;
            border-radius: 12px;
            border-left: 3px solid #bf5af2;
        }

        .tech-item h4 {
            margin-bottom: 12px;
            font-size: 1.1em;
            color: #f2f2f7;
        }

        .tech-item p {
            font-size: 0.95em;
            color: #a8a8a8;
        }

        .insight-item {
            background-color: #3d3d3d;
            padding: 16px;
            margin: 12px 0;
            border-radius: 12px;
            border-left: 3px solid #007aff;
            color: #a8a8a8;
        }

        .regional-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }

        .region-card {
            background-color: #3d3d3d;
            padding: 20px;
            text-align: center;
            border-radius: 12px;
            border: 1px solid #555;
        }

        .region-card h4 {
            margin-bottom: 12px;
            color: #f2f2f7;
            font-size: 0.9em;
        }

        .region-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #30d158;
        }

        .growth-rate {
            font-size: 0.85em;
            margin-top: 8px;
            color: #a8a8a8;
        }

        @media (max-width: 768px) {
            .dashboard {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 2.5em;
            }
            
            .news-item, .card {
                padding: 24px;
            }
            
            .filter-tabs {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 10px;
            }

            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>EV Motor Market Intelligence</h1>
            <p>ê¸€ë¡œë²Œ ì „ê¸°ì°¨ ëª¨í„° ì‚°ì—… í•µì‹¬ ì¸ì‚¬ì´íŠ¸ & ë™í–¥</p>
        </div>
        
        <div class="auto-update-status">
            <span class="update-indicator"></span>
            ìë™ ì—…ë°ì´íŠ¸: ë§¤ì‹œê°„ (06:00-23:00 KST) | ë‹¤ìŒ ì—…ë°ì´íŠ¸ê¹Œì§€ <span class="countdown-timer" id="countdown"></span>
        </div>

        <div class="last-update-info">
            ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="lastUpdate">2025. 09. 14. 06:00 (KST)</span>
        </div>

        <div class="grid">
            <div class="card large-card">
                <h3>ğŸ“Š ê¸€ë¡œë²Œ EV ì‹œì¥ í˜„í™© (2024-2025)</h3>
                <div class="regional-data">
                    <div class="region-card">
                        <h4>ê¸€ë¡œë²Œ íŒë§¤ëŸ‰</h4>
                        <div class="region-value">17M</div>
                        <div class="growth-rate trend-up">+25% (2024)</div>
                    </div>
                    <div class="region-card">
                        <h4>ì¤‘êµ­ ì‹œì¥</h4>
                        <div class="region-value">11M</div>
                        <div class="growth-rate">ìµœëŒ€ ì‹œì¥</div>
                    </div>
                    <div class="region-card">
                        <h4>ì‹œì¥ ê·œëª¨</h4>
                        <div class="region-value">$1.3T</div>
                        <div class="growth-rate trend-up">â†’ $6.5T (2030)</div>
                    </div>
                    <div class="region-card">
                        <h4>ì—°í‰ê·  ì„±ì¥ë¥ </h4>
                        <div class="region-value">32.5%</div>
                        <div class="growth-rate">(2025-2030)</div>
                    </div>
                </div>
                <div class="source">
                    ì¶œì²˜: <a href="https://www.iea.org/reports/global-ev-outlook-2025" target="_blank">IEA Global EV Outlook 2025</a>,
                    <a href="https://www.grandviewresearch.com/industry-analysis/electric-vehicles-ev-market" target="_blank">Grand View Research</a>
                </div>
            </div>

            <div class="card">
                <h3>ğŸ”‹ EV ëª¨í„° ì‹œì¥ ê·œëª¨</h3>
                <div class="metric">
                    <span class="metric-label">2025ë…„ ì‹œì¥ ê·œëª¨</span>
                    <span class="metric-value trend-up">$27.16B</span>
                </div>
                <div class="metric">
                    <span class="metric-label">2032ë…„ ì˜ˆìƒ ê·œëª¨</span>
                    <span class="metric-value trend-up">$77.61B</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ì—°í‰ê·  ì„±ì¥ë¥  (CAGR)</span>
                    <span class="metric-value trend-up">16.2%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ì•„ì‹œì•„íƒœí‰ì–‘ ì ìœ ìœ¨</span>
                    <span class="metric-value">52.91%</span>
                </div>
                <div class="source">
                    ì¶œì²˜: <a href="https://www.fortunebusinessinsights.com/electric-vehicle-motor-market-107244" target="_blank">Fortune Business Insights</a>
                </div>
            </div>

            <div class="card">
                <h3>ğŸ§² PMSM ì‹œì¥ ë™í–¥</h3>
                <div class="metric">
                    <span class="metric-label">2024ë…„ ì‹œì¥ ê·œëª¨</span>
                    <span class="metric-value">$27.01B</span>
                </div>
                <div class="metric">
                    <span class="metric-label">2025ë…„ ì˜ˆìƒ ê·œëª¨</span>
                    <span class="metric-value trend-up">$28.83B</span>
                </div>
                <div class="metric">
                    <span class="metric-label">2029ë…„ ì˜ˆìƒ ê·œëª¨</span>
                    <span class="metric-value trend-up">$40.4B</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ì—°í‰ê·  ì„±ì¥ë¥ </span>
                    <span class="metric-value trend-up">8.4%</span>
                </div>
                <div class="source">
                    ì¶œì²˜: <a href="https://www.thebusinessresearchcompany.com/report/permanent-magnet-synchronous-motor-global-market-report" target="_blank">The Business Research Company</a>
                </div>
            </div>
        </div>

        <div class="filter-tabs">
            <div class="filter-tab active" data-filter="all">ì „ì²´</div>
            <div class="filter-tab" data-filter="breaking">ì†ë³´</div>
            <div class="filter-tab" data-filter="tech">ê¸°ìˆ í˜ì‹ </div>
            <div class="filter-tab" data-filter="market">ì‹œì¥ë™í–¥</div>
            <div class="filter-tab" data-filter="korea">êµ­ë‚´ë‰´ìŠ¤</div>
        </div>

        <div class="news-grid" id="newsGrid">
            <!-- News items will be dynamically populated here -->
        </div>
        
        <button class="more-btn" id="moreBtn">ë” ë§ì€ ë‰´ìŠ¤ ë³´ê¸°</button>

        <div class="card large-card">
            <h3>ğŸš€ í•µì‹¬ ê¸°ìˆ  íŠ¸ë Œë“œ</h3>
            <div class="tech-item">
                <h4>ì‹¤ë¦¬ì½˜ ì¹´ë°”ì´ë“œ(SiC) ì¸ë²„í„°</h4>
                <p>íš¨ìœ¨ì„± í–¥ìƒ ë° ì†ì‹¤ ê°ì†Œë¡œ ì°¨ì„¸ëŒ€ EV ê²¬ì¸ ì¸ë²„í„°ì˜ í•µì‹¬ ê¸°ìˆ ë¡œ ë¶€ìƒ. STMicroelectronics ë“± ì£¼ìš” ë°˜ë„ì²´ ê¸°ì—…ë“¤ì´ ì‹œì¥ì„ ì£¼ë„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="tech-item">
                <h4>ë©”ê°€ì™€íŠ¸ ì¶©ì „ ì‹œìŠ¤í…œ</h4>
                <p>ëŒ€í˜• ìƒìš©ì°¨ ë° ë¯¸ë˜ ìŠ¹ìš©ì°¨ë¥¼ ìœ„í•œ ë©”ê°€ì™€íŠ¸ê¸‰ ì¶©ì „ ìŠ¤í…Œì´ì…˜ì´ 2024ë…„ë¶€í„° ì „ ì„¸ê³„ì ìœ¼ë¡œ ì„¤ì¹˜ ì‹œì‘. ì´ëŠ” ê³ ì„±ëŠ¥ EV ëª¨í„°ì™€ íŒŒì›ŒíŠ¸ë ˆì¸ ê°œë°œì„ ì´‰ì§„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="tech-item">
                <h4>AI ê¸°ë°˜ ëª¨í„° ì œì–´</h4>
                <p>ì¸ê³µì§€ëŠ¥ ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•œ ëª¨í„° ì œì–´ ì‹œìŠ¤í…œìœ¼ë¡œ ì—ë„ˆì§€ íš¨ìœ¨ì„±ê³¼ ì°¨ëŸ‰ ì„±ëŠ¥ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìµœì í™”í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="source">
                ì¶œì²˜: <a href="https://virta.global/resources/blog/global-electric-vehicle-market" target="_blank">Virta Global</a>,
                <a href="https://www.yolegroup.com/category/power-electronics/" target="_blank">Yole Group</a>
            </div>
        </div>

        <div class="card large-card">
            <h3>ğŸ’¡ ì „ëµì  ì¸ì‚¬ì´íŠ¸</h3>
            <div class="insight-item">
                <strong>ì‹œì¥ ì§‘ì¤‘ë„:</strong> ì¤‘êµ­ì´ ì „ì²´ EV ì‹œì¥ì˜ ì•½ 65%ë¥¼ ì°¨ì§€í•˜ë©° ì••ë„ì  ìš°ìœ„ë¥¼ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.
            </div>
            <div class="insight-item">
                <strong>ê°€ê²© ê²½ìŸë ¥:</strong> 2024ë…„ ì‹ ê·œ ì „ê¸°ì°¨ ëª¨ë¸ ì¤‘ 75%ê°€ $50,000 ì´ìƒìœ¼ë¡œ, ëŒ€ì¤‘í™”ë¥¼ ìœ„í•´ ê°€ê²© ê²½ìŸë ¥ ê°œì„ ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
            </div>
            <div class="insight-item">
                <strong>ê¸°ìˆ  í˜ì‹ :</strong> PMSMê³¼ SiC ê¸°ìˆ ì˜ ê²°í•©ìœ¼ë¡œ ëª¨í„° íš¨ìœ¨ì„± ë° ì „ë ¥ ë°€ë„ê°€ ëŒ€í­ í–¥ìƒë˜ê³  ìˆìŠµë‹ˆë‹¤.
            </div>
            <div class="insight-item">
                <strong>ê³µê¸‰ë§ ë‹¤ë³€í™”:</strong> EUì˜ ì „ê¸°ì°¨ ìˆ˜ì¶œì´ ì¦ê°€í•˜ë©° ì¤‘êµ­ ì˜ì¡´ë„ë¥¼ ì™„í™”í•˜ë ¤ëŠ” ë…¸ë ¥ì´ ì§€ì†ë˜ê³  ìˆìŠµë‹ˆë‹¤.
            </div>
            <div class="insight-item">
                <strong>ë¯¸ë˜ ì„±ì¥ ë™ë ¥:</strong> ìƒìš©ì°¨ ì „ë™í™”ì™€ ë©”ê°€ì™€íŠ¸ ì¶©ì „ ì¸í”„ë¼ê°€ ìƒˆë¡œìš´ ì„±ì¥ ì—”ì§„ìœ¼ë¡œ ë¶€ìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.
            </div>
        </div>

        <div class="card large-card">
            <h3>ğŸ“ˆ EV ëª¨í„° ì‹œì¥ ì„±ì¥ ì˜ˆì¸¡</h3>
            <div class="chart-container">
                <canvas id="marketChart"></canvas>
            </div>
            <div class="source">
                ì¶œì²˜: Fortune Business Insights, The Business Research Company ë°ì´í„° ê¸°ë°˜
            </div>
        </div>

        <div class="card">
            <h3>ğŸŒ ì§€ì—­ë³„ ì‹œì¥ í˜„í™©</h3>
            <div class="metric">
                <span class="metric-label">ì¤‘êµ­ EV íŒë§¤ëŸ‰</span>
                <span class="metric-value trend-up">11M+ (2024)</span>
            </div>
            <div class="metric">
                <span class="metric-label">ìœ ëŸ½ EV ìˆ˜ì¶œëŸ‰</span>
                <span class="metric-value trend-up">830K (+9%)</span>
            </div>
            <div class="metric">
                <span class="metric-label">í•œêµ­ ì‹œì¥ ì„±ì¥ë¥ </span>
                <span class="metric-value trend-up">11.7% (2024)</span>
            </div>
            <div class="source">
                ì¶œì²˜: <a href="https://www.iea.org/reports/global-ev-outlook-2025" target="_blank">IEA Global EV Outlook 2025</a>
            </div>
        </div>
        
    </div>
    
    <script>
        // Load news data from JSON file
        async function loadNews() {
            try {
                const response = await fetch('data/news.json');
                if (!response.ok) {
                    throw new Error('Failed to load news data');
                }
                const data = await response.json();
                
                document.getElementById('lastUpdate').textContent = 
                    new Date(data.lastUpdated).toLocaleString('ko-KR', { 
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: false
                    }) + ' (KST)';
                
                renderNews('all', data.articles);
            } catch (error) {
                console.error('Error loading news:', error);
                document.getElementById('newsGrid').innerHTML = `
                    <div class="card">
                        <h3>ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤</h3>
                        <p>ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>
                    </div>
                `;
            }
        }

        let visibleCount = 6;
        let currentFilter = 'all';
        let currentArticles = [];

        const newsGrid = document.getElementById('newsGrid');
        const moreBtn = document.getElementById('moreBtn');
        const filterTabs = document.querySelectorAll('.filter-tab');

        // News card creation function
        const createNewsCard = (item) => {
            const newsItem = document.createElement('div');
            newsItem.className = 'news-item';
            newsItem.dataset.category = item.category;
            
            const categoryText = {
                'breaking': 'ì†ë³´',
                'tech': 'ê¸°ìˆ í˜ì‹ ',
                'market': 'ì‹œì¥ë™í–¥',
                'korea': 'êµ­ë‚´ë‰´ìŠ¤'
            }[item.category];
            
            newsItem.innerHTML = `
                <a href="${item.url}" target="_blank">
                    <span class="news-badge ${item.category}">${categoryText}</span>
                    <h2 class="news-title">${item.title}</h2>
                    <p class="news-summary">${item.summary}</p>
                    <div class="news-meta">
                        <span class="news-source">${item.source}</span>
                        <span class="news-date">${item.date}</span>
                    </div>
                </a>
            `;
            return newsItem;
        };

        // News rendering function
        const renderNews = (filter, articles) => {
            currentArticles = articles;
            newsGrid.innerHTML = '';
            const filteredNews = articles.filter(item => filter === 'all' || item.category === filter);
            
            const newsToShow = filteredNews.slice(0, visibleCount);
            newsToShow.forEach(item => {
                const card = createNewsCard(item);
                newsGrid.appendChild(card);
            });
            
            moreBtn.style.display = visibleCount >= filteredNews.length ? 'none' : 'block';
        };

        // Filter tab click events
        filterTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                filterTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentFilter = tab.dataset.filter;
                visibleCount = 6;
                renderNews(currentFilter, currentArticles);
            });
        });

        // More button click event
        moreBtn.addEventListener('click', () => {
            visibleCount += 6;
            renderNews(currentFilter, currentArticles);
        });

        // Initialize news loading
        loadNews();

        // Countdown timer
        function updateCountdown() {
            const now = new Date();
            const currentHour = now.getHours();
            
            // If outside 06:00-23:00, show time until 06:00
            if (currentHour < 6) {
                let target = new Date(now);
                target.setHours(6, 0, 0, 0);
                const timeRemaining = target - now;
                showCountdown(timeRemaining);
            } else if (currentHour >= 23) {
                let tomorrow = new Date(now);
                tomorrow.setDate(now.getDate() + 1);
                tomorrow.setHours(6, 0, 0, 0);
                const timeRemaining = tomorrow - now;
                showCountdown(timeRemaining);
            } else {
                // During 06:00-23:00, show time until next hour
                let nextHour = new Date(now);
                nextHour.setHours(nextHour.getHours() + 1);
                nextHour.setMinutes(0, 0, 0);
                const timeRemaining = nextHour - now;
                showCountdown(timeRemaining);
            }
        }

        function showCountdown(timeRemaining) {
            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
            
            document.getElementById('countdown').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Market Chart
        const ctx = document.getElementById('marketChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['2022', '2023', '2024', '2025', '2026', '2027', '2028', '2029', '2030', '2031', '2032'],
                datasets: [{
                    label: 'EV ëª¨í„° ì‹œì¥ ê·œëª¨ (ì‹­ì–µ ë‹¬ëŸ¬)',
                    data: [19.2, 22.5, 27.0, 27.16, 31.0, 36.5, 43.1, 50.8, 60.1, 68.0, 77.61],
                    backgroundColor: 'rgba(0, 122, 255, 0.4)',
                    borderColor: 'rgba(0, 122, 255, 1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: '#f0f0f0'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += '$' + context.parsed.y.toLocaleString() + 'B';
                                }
                                return label;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            color: '#a8a8a8'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#a8a8a8',
                            callback: function(value) {
                                return '$' + value + 'B';
                            }
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>